<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Avatar's Interactive Guide to Britannia</title>
    <script src="js/tailwind.js"></script>
    <script src="js/chart.js"></script>
    <link rel="stylesheet" href="css/fonts.css">
    <!-- Chosen Palette: Parchment & Ink -->
    <!-- Application Structure Plan: The application is structured as a tabbed interface to mirror a player's typical progression and information-seeking behavior. It's divided into five main sections: 'The Avatar's Path' (character setup), 'The Grand Quest' (walkthrough), 'Britannian Almanac' (data reference), 'World Atlas' (dungeons), and 'Sage's Counsel' (AI-powered help). This non-linear structure allows users to either follow the quest chronologically or quickly look up specific information. Interactive charts, filterable tables, and two new Gemini API features‚Äîan AI backstory generator and a strategic advisor‚Äîprovide dynamic, personalized content. -->
    <!-- Visualization & Content Choices: 
        - Character Virtues: Report Info -> Starting attribute bonuses. Goal -> Allow players to plan their character build. Viz/Method -> Interactive bar chart (Chart.js). Interaction -> Hovering over bars shows precise stat bonuses. Justification -> A chart is more engaging and easier to compare than a static table.
        - Companion Roster: Report Info -> Companion stats and roles. Goal -> Help players build their ideal party. Viz/Method -> A filterable and sortable HTML table. Interaction -> Users can sort by STR, DEX, INT, or Level. Justification -> An interactive table is superior to a static list for comparing multiple attributes.
        - Quest Walkthrough: Report Info -> Linear steps for major quests. Goal -> Guide players through the game's narrative. Viz/Method -> Accordion-style collapsible sections. Interaction -> Clicking a quest title expands to show the detailed steps. Justification -> Prevents overwhelming the user with a wall of text.
        - AI Backstory Generator (Gemini): Goal -> Enhance roleplaying immersion. Viz/Method -> Button-triggered text generation. Interaction -> User selects virtues and clicks a button. Justification -> Creates personalized, creative content that connects the player to their character.
        - AI Strategic Advisor (Gemini): Goal -> Provide dynamic, on-demand help. Viz/Method -> Text input and response display. Interaction -> User types a question and receives a detailed, contextual answer. Justification -> Offers a more interactive and flexible help system than a static FAQ or walkthrough.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <link rel="stylesheet" href="css/Ultima6.css">
</head>
<body class="antialiased">
    <div class="w-full bg-gray-100 text-gray-700">
      <div class="container mx-auto px-4 py-2">
        <a href="index.html" class="inline-flex items-center gap-2 hover:underline"><span aria-hidden="true">‚Üê</span> Back to Guides</a>
      </div>
    </div>

    <div class="container mx-auto p-4 sm:p-6 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-6xl font-bold text-amber-900">The Avatar's Guide to Britannia</h1>
            <p class="text-lg text-amber-800 mt-2">An Interactive Walkthrough of Ultima VI: The False Prophet</p>
        </header>

        <nav class="flex flex-wrap justify-center border-b-2 border-amber-800/20 mb-8">
            <button class="tab-button active text-sm sm:text-lg p-4" onclick="showTab('avatar')">The Avatar's Path</button>
            <button class="tab-button text-sm sm:text-lg p-4" onclick="showTab('quest')">The Grand Quest</button>
            <button class="tab-button text-sm sm:text-lg p-4" onclick="showTab('almanac')">Britannian Almanac</button>
            <button class="tab-button text-sm sm:text-lg p-4" onclick="showTab('atlas')">World Atlas</button>
            <button class="tab-button text-sm sm:text-lg p-4" onclick="showTab('passage')">Words of Passage</button>
            <button class="tab-button text-sm sm:text-lg p-4" onclick="showTab('cheats')">Cheat Codex</button>
            <button class="tab-button text-sm sm:text-lg p-4" onclick="showTab('counsel')">Consult with the Seer</button>
        </nav>

        <main>
            <section id="avatar" class="tab-content active">
                <div class="bg-amber-50/50 p-6 rounded-lg shadow-md">
                    <h2 class="text-3xl font-bold mb-4 text-amber-900">Character Creation & Development</h2>
                    <p class="mb-6 text-amber-900/80">Your journey begins not with a sword, but with a choice. The gypsy's questions and your meditations at the shrines forge the hero you will become. This section provides the tools to understand and master your Avatar's growth.</p>
                    
                    <div class="grid md:grid-cols-2 gap-8">
                        <div>
                            <h3 class="text-2xl font-semibold mb-3 text-amber-900">The Gypsy's Prophecy</h3>
                            <p class="mb-4">The seven questions posed by the gypsy determine your starting attributes. The chart below visualizes the total potential bonus for each attribute based on the virtues you favor.</p>
                            <div class="chart-container">
                                <canvas id="virtueChart"></canvas>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-2xl font-semibold mb-3 text-amber-900">Path to Enlightenment</h3>
                            <p class="mb-4">Experience points alone do not grant power. You must meditate at a cleansed Shrine of Virtue to level up. Each shrine grants a unique, permanent bonus to your attributes.</p>
                            <ul id="shrine-list" class="space-y-2"></ul>
                        </div>
                    </div>
                    <div class="mt-8 pt-8 border-t border-amber-800/20">
                        <h3 class="text-2xl font-semibold mb-3 text-amber-900">The Avatar's Chronicle</h3>
                        <p class="mb-4">Your virtues define not only your abilities but your story. Select up to three virtues that best represent your Avatar, and let the bards of Britannia compose your chronicle.</p>
                        <div id="virtue-selection" class="flex flex-wrap gap-4 mb-4"></div>
                        <button id="generate-chronicle" class="bg-amber-800 hover:bg-amber-900 text-white font-bold py-2 px-4 rounded transition-colors duration-300">
                            ‚ú® Generate My Avatar's Chronicle
                        </button>
                        <div id="chronicle-output" class="mt-4"></div>
                    </div>
                </div>
            </section>

            <section id="quest" class="tab-content">
                 <div class="bg-amber-50/50 p-6 rounded-lg shadow-md">
                    <h2 class="text-3xl font-bold mb-4 text-amber-900">The Grand Quest Walkthrough</h2>
                    <p class="mb-4 text-amber-900/80">The path to peace is fraught with peril, prophecy, and pirates. This walkthrough is divided into the major acts of the story. Click on any title to expand its section and reveal layered guidance, including dialogue keywords, puzzle solutions, and virtue-friendly alternatives.</p>
                    <p class="mb-6 text-sm text-amber-800/80">Tip: Look for the <span class="keyword-hint inline-block px-2 py-1">Dialogue Keywords</span> badges inside each act. Hover or focus on a badge to summon a floating cheat sheet right beside it.</p>
                    <div id="quest-accordion" class="space-y-2"></div>
                    <div id="keyword-helper" class="keyword-helper hidden" role="tooltip" aria-hidden="true">
                        <h3 class="text-xl font-semibold text-amber-900 mb-2 flex items-center gap-2">Dialogue Cheat Sheet <span aria-hidden="true">üó£Ô∏è</span></h3>
                        <p id="keyword-helper-text" class="text-amber-900/80"></p>
                    </div>
                </div>
            </section>

            <section id="almanac" class="tab-content">
                <div class="bg-amber-50/50 p-6 rounded-lg shadow-md">
                    <h2 class="text-3xl font-bold mb-4 text-amber-900">Britannian Almanac</h2>
                    <p class="mb-6 text-amber-900/80">A successful Avatar relies on loyal companions, powerful equipment, and mastery of the arcane. This almanac serves as your quick reference to the essential resources available throughout the realm.</p>
                    <div class="border-b border-amber-800/20 mb-4">
                        <nav class="-mb-px flex space-x-6" aria-label="Tabs">
                            <button class="almanac-tab-button active" onclick="showAlmanacTab('companions')">Companions</button>
                            <button class="almanac-tab-button" onclick="showAlmanacTab('equipment')">Equipment</button>
                            <button class="almanac-tab-button" onclick="showAlmanacTab('magic')">Magic</button>
                        </nav>
                    </div>

                    <div id="companions" class="almanac-tab-content active">
                        <h3 class="text-2xl font-semibold mb-3 text-amber-900">The Fellowship</h3>
                        <p class="mb-4">You may recruit up to eight members to your party. Click on the table headers to sort companions by their strengths and find the perfect allies for your quest.</p>
                        <div class="overflow-x-auto">
                            <table class="w-full text-left border-collapse">
                                <thead id="companion-table-head"></thead>
                                <tbody id="companion-table-body"></tbody>
                            </table>
                        </div>
                    </div>

                    <div id="equipment" class="almanac-tab-content hidden">
                        <h3 class="text-2xl font-semibold mb-3 text-amber-900">The Armory of Britannia</h3>
                        <p class="mb-4">The finest arms and armor are often hidden away in the deepest dungeons. Here lies a catalog of the most potent equipment in the realm.</p>
                        <div id="equipment-list" class="grid md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
                    </div>

                    <div id="magic" class="almanac-tab-content hidden">
                         <h3 class="text-2xl font-semibold mb-3 text-amber-900">The Eight Circles of Magic</h3>
                        <p class="mb-4">Magic is an indispensable tool. This grimoire lists the most essential spells for survival and exploration.</p>
                        <div id="spells-list" class="grid md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
                    </div>
                </div>
            </section>

            <section id="atlas" class="tab-content">
                <div class="bg-amber-50/50 p-6 rounded-lg shadow-md">
                    <h2 class="text-3xl font-bold mb-4 text-amber-900">World Atlas: Dungeons of Britannia</h2>
                    <p class="mb-6 text-amber-900/80">The depths of Britannia hold both great treasure and great peril. This guide provides an overview of the key dungeons you must brave to complete your quest.</p>
                    <div id="dungeon-list" class="space-y-4"></div>
                    <div class="atlas-map mt-8">
                        <h3 class="text-2xl font-semibold mb-3 text-amber-900">High-Resolution Britannia Map</h3>
                        <p class="text-amber-900/80 mb-4">Study every moongate, dungeon entrance, and coastline in a single glance. Click or tap to open the full-size parchment in a new tab.</p>
                        <a href="images/U6PWorldMap.jpg" target="_blank" rel="noopener" class="block group">
                            <img src="images/U6PWorldMap.jpg" alt="Ultima VI: The False Prophet world map" class="rounded-lg shadow-md border border-amber-200 group-hover:shadow-xl transition-shadow duration-300" loading="lazy">
                        </a>
                    </div>
                </div>
            </section>
            
            <section id="counsel" class="tab-content">
                <div class="bg-amber-50/50 p-6 rounded-lg shadow-md">
                    <h2 class="text-3xl font-bold mb-4 text-amber-900">‚ú® Consult with the Seer</h2>
                    <p class="mb-6 text-amber-900/80">The path of the Avatar is not always clear. If you find yourself lost, perplexed by a puzzle, or seeking strategic wisdom, pose your query to the seer. The ethereal winds will carry your question and return with guidance.</p>
                    <div class="w-full space-y-6">
                        <div>
                            <label for="seer-query" class="block text-lg font-semibold text-amber-900 mb-2">What guidance do you seek?</label>
                            <textarea id="seer-query" rows="4" class="w-full p-2 border border-amber-300 rounded-md bg-white/70 focus:ring-amber-500 focus:border-amber-500" placeholder="e.g., How can I defeat the dragons in Destard? or Where can I find the plans for the hot-air balloon?"></textarea>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-amber-900 mb-2">Focus the Seer's Sight</h3>
                            <p class="text-sm text-amber-800/80 mb-3">Select up to three lore packets to include in your request. The seer will weave these notes directly into the answer.</p>
                            <div id="seer-context-options" class="grid sm:grid-cols-2 gap-3"></div>
                        </div>
                        <div>
                            <label for="seer-shortcuts" class="block text-sm font-semibold text-amber-900 mb-2">Need a quick prompt?</label>
                            <select id="seer-shortcuts" class="w-full p-2 border border-amber-300 rounded-md bg-white/70 focus:ring-amber-500 focus:border-amber-500">
                                <option value="">Choose a prepared question‚Ä¶</option>
                            </select>
                        </div>
                        <button id="ask-seer" class="bg-amber-800 hover:bg-amber-900 text-white font-bold py-2 px-4 rounded transition-colors duration-300">
                            Ask the Seer
                        </button>
                    </div>
                    <div id="seer-response" class="mt-6"></div>
                </div>
            </section>

            <section id="cheats" class="tab-content">
                <div class="bg-amber-50/50 p-6 rounded-lg shadow-md">
                    <h2 class="text-3xl font-bold mb-4 text-amber-900">Cheat Codex &amp; Exploits</h2>
                    <p class="mb-6 text-amber-900/80">Sometimes the forces of Britannia require a helping hand (or a little humbug). These sanctioned notes document the secret menus, exploits, and platform-specific tricks gathered from veteran Avatars. Use them wisely if virtue permits.</p>
                    <div id="cheat-list" class="space-y-4"></div>
                </div>
            </section>

            <section id="passage" class="tab-content">
                <div class="bg-amber-50/50 p-6 rounded-lg shadow-md">
                    <h2 class="text-3xl font-bold mb-4 text-amber-900">Words of Passage: Copy Protection</h2>
                    <p class="mb-6 text-amber-900/80">Certain individuals in Britannia will test your knowledge to verify your identity. Use this searchable archive to find the answers you seek. Simply type a keyword from the question (e.g., "Trolls" or "Jux") into the box below.</p>
                    <input type="text" id="passage-search" class="w-full p-2 mb-6 border border-amber-300 rounded-md bg-white/70 focus:ring-amber-500 focus:border-amber-500" placeholder="Search for a question...">
                    <div id="passage-list" class="space-y-4"></div>
                </div>
            </section>
        </main>

    </div>

    <script>

</script>
<link rel="stylesheet" href="styles.css">
<script src="js/Ultima6.js"></script>
</body>
</html>
